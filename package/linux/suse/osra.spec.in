#
# spec file for package OSRA
#
# Copyright (c) 2009 SUSE LINUX Products GmbH, Nuernberg, Germany.
#
# All modifications and additions to the file contributed by third parties
# remain the property of their copyright owners, unless otherwise agreed
# upon. The license for this file, and modifications and additions to the
# file, is the same license as for the pristine package itself (unless the
# license for the pristine package is not an Open Source License, in which
# case the license is the MIT License). An "Open Source License" is a
# license that conforms to the Open Source Definition (Version 1.9)
# published by the Open Source Initiative.

# Please submit bugfixes or comments via http://bugs.opensuse.org/
#

# norootforbuild

%define name		@PACKAGE_NAME@
%define version		@PACKAGE_VERSION@

%define builddep	glibc-devel, libstdc++45-devel, tclap >= 1.2, potrace-devel >= 1.8, gocr-devel >= 0.49, ocrad-devel >= 0.20, libopenbabel-devel >= 2.2, libGraphicsMagick++-devel >= 1.3.10, docbook-xsl-stylesheets => 1.74.0, libxslt
%define binarydep	potrace-lib >= 1.8, libopenbabel3 >= 2.2, libGraphicsMagick++3 >= 1.3.10

Name:			%{name}
BuildRequires:	%{builddep}
Url:			http://osra.sourceforge.net/
Summary:		A command line chemical structure recognition tool
Version:		%{version}
Release:		1.0
Group:			Productivity/Graphics/Other
Requires:		%{binarydep}
#Provides:
License:		GPL v2 or later
Source0:		%{name}-%{version}.tar.gz
#Patch0:		Makefile.in.patch
BuildRoot:		%{_tmppath}/%{name}-%{version}-build

%description
OSRA is a utility designed to convert graphical representations of chemical structures into SMILES or SDF.
OSRA can read a document in any of the over 90 graphical formats parseable by GraphicMagick and generate
the SMILES or SDF representation of the molecular structure images encountered within that document.

Authors:
--------
    Igor Filippov <igorf@helix.nih.gov>


%package lib@LIB_MAJOR_VERSION@
Summary:		OSRA C++ Library
Group:			Development/Libraries/C and C++
Requires:		%{binarydep}

%description lib@LIB_MAJOR_VERSION@
This package contains the dynamic library needed to consume OSRA functionality
from C++ programs.

%package lib-java@LIB_MAJOR_VERSION@
Summary:		OSRA Java Library
Group:			Development/Libraries/C and C++
Requires:		%{binarydep}

%description lib-java@LIB_MAJOR_VERSION@
This package contains the dynamic library needed to consume OSRA functionality
from Java programs.

%package devel
Summary:        OSRA Static Library and Header Files mandatory for Development
Group:          Development/Libraries/C and C++
Requires:       %{name}-lib@LIB_MAJOR_VERSION@ = %{version}

%description devel
This package contains all necessary include files and libraries needed
to develop applications on the top of OSRA.

%prep
%setup -n %{name}-%{version}
#%patch0 -p0

%build
./configure --enable-docs --enable-lib --enable-java --prefix=/usr --datadir='${datarootdir}/${PACKAGE_NAME}' --docdir='${datarootdir}/doc/packages/${PACKAGE_NAME}'
make CXXFLAGS='${RPM_OPT_FLAGS}'

%install
%makeinstall

#%clean
#rm -rf $RPM_BUILD_ROOT

%define _sharedir %{_prefix}/share

%files
%defattr(-, root, root)
%{_prefix}/bin/%{name}
%{_mandir}/man?/%{name}.*
%{_sharedir}
%exclude %{_libdir}
%exclude %{_includedir}

%files lib@LIB_MAJOR_VERSION@
%defattr(-,root,root)
%{_libdir}/lib%{name}.so*
%{_sharedir}/%{name}

%files lib-java@LIB_MAJOR_VERSION@
%defattr(-,root,root)
%{_libdir}/lib%{name}_java.so*
%{_sharedir}/%{name}

%files devel
%defattr(-,root,root)
%{_libdir}/lib%{name}.a
%{_libdir}/pkgconfig
%{_includedir}

%doc README

# spec file ends here

%changelog
* Thu Jul 01 2011 dma_k@mail.ru
- Initial SuSE package
